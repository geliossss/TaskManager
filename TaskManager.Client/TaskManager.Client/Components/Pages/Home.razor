@page "/"
@using TaskManager.Data
@using Microsoft.EntityFrameworkCore
@inject AppDbContext dbContext

<PageTitle>Task Manager</PageTitle>

<h1>Task List</h1>

@if (tasks == null)
{
    <p>Loading tasks...</p>
}
else
{
    @foreach (var task in tasks)
    {
        <div class="task">
            <h3>@task.Title</h3>
            <p>@task.Description</p>
            <span>Status: @task.Status</span>
        </div>
    }
}

@code {
    private List<TaskItem> tasks;

    protected override async Task OnInitializedAsync()
    {
        tasks = await dbContext.Tasks.ToListAsync();
    }
}